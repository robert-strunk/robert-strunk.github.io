<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastermind Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .game-info {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
        }

        .game-board {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
        }

        .guess-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .guess-row.active {
            border-color: #007bff;
            background: #e3f2fd;
        }

        .guess-row.completed {
            background: #e8f5e8;
        }

        .peg {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid #333;
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #ddd;
            position: relative;
        }

        .peg:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .peg.selected {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.3);
        }

        .peg.red { background-color: #dc3545; }
        .peg.blue { background-color: #007bff; }
        .peg.green { background-color: #28a745; }
        .peg.yellow { background-color: #ffc107; }
        .peg.orange { background-color: #fd7e14; }
        .peg.purple { background-color: #6f42c1; }

        .feedback-area {
            display: flex;
            flex-direction: column;
            margin-left: 20px;
            gap: 5px;
        }

        .feedback-peg {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #333;
            background: #ddd;
        }

        .feedback-peg.black {
            background-color: #000;
        }

        .feedback-peg.white {
            background-color: #fff;
        }

        .color-palette {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .color-option {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 4px solid #333;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .color-option:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .color-option.selected {
            border-color: #007bff;
            box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.3);
        }

        .row-controls {
            display: flex;
            align-items: center;
            margin-left: 20px;
            gap: 15px;
        }

        .game-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .control-item {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .control-item:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }

        .control-item:active {
            transform: scale(0.95);
        }

        .submit-control {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .submit-control:hover {
            background: linear-gradient(45deg, #218838, #1ea085);
        }

        .reset-control {
            background: linear-gradient(45deg, #dc3545, #e74c3c);
            color: white;
        }

        .reset-control:hover {
            background: linear-gradient(45deg, #c82333, #c0392b);
        }

        .new-game-control {
            background: linear-gradient(45deg, #6c757d, #495057);
            color: white;
            width: 50px;
            height: 50px;
            font-size: 14px;
        }

        .new-game-control:hover {
            background: linear-gradient(45deg, #5a6268, #343a40);
        }

        .control-item:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .control-tooltip {
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-item:hover .control-tooltip {
            opacity: 1;
        }

        .message {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 18px;
        }

        .message.win {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .message.lose {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        .instructions {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }

        .instructions h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .instructions ul {
            color: #666;
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 5px;
        }

        @media (max-width: 600px) {
            .game-container {
                padding: 15px;
            }
            
            .peg {
                width: 40px;
                height: 40px;
            }
            
            .color-option {
                width: 50px;
                height: 50px;
            }
            
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ðŸ§© Mastermind</h1>
        
        <div class="instructions">
            <h3>How to Play:</h3>
            <ul>
                <li>Click on a peg in the current row to cycle through colors</li>
                <li>Fill all 4 pegs in the row, then click "Submit Guess"</li>
                <li>Black peg = correct color in correct position</li>
                <li>White peg = correct color in wrong position</li>
                <li>You have 10 attempts to crack the code!</li>
            </ul>
        </div>

        <div class="game-controls">
            <button class="control-item new-game-control" onclick="resetGame()" title="New Game">
                NEW
            </button>
        </div>

        <div class="game-info">
            <p>Attempt: <span id="attempt-count">1</span> of 10</p>
        </div>

        <div class="game-board" id="game-board">
            <!-- Game rows will be generated by JavaScript -->
        </div>


        <div class="message" id="message" style="display: none;"></div>
    </div>

    <script>
        // Game configuration
        const COLORS = ['red', 'blue', 'green', 'yellow', 'orange', 'purple'];
        const CODE_LENGTH = 4;
        const MAX_ATTEMPTS = 10;
        
        // Game state
        let secretCode = [];
        let currentAttempt = 0;
        let gameOver = false;

        // Initialize the game
        function initGame() {
            generateSecretCode();
            createGameBoard();
            updateGameInfo();
            hideMessage();
        }

        // Generate the secret code
        function generateSecretCode() {
            secretCode = [];
            for (let i = 0; i < CODE_LENGTH; i++) {
                const randomIndex = Math.floor(Math.random() * COLORS.length);
                secretCode.push(COLORS[randomIndex]);
            }
            console.log('Secret code:', secretCode); // For debugging
        }

        // Create the game board
        function createGameBoard() {
            const board = document.getElementById('game-board');
            board.innerHTML = '';
            
            // Create only the initial active row
            const rowDiv = document.createElement('div');
            rowDiv.className = 'guess-row active';
            rowDiv.id = `row-0`;
            
            // Create pegs
            for (let col = 0; col < CODE_LENGTH; col++) {
                const peg = document.createElement('div');
                peg.className = 'peg';
                peg.id = `peg-0-${col}`;
                peg.onclick = () => togglePegColor(0, col);
                rowDiv.appendChild(peg);
            }
            
            // Create feedback area
            const feedbackArea = document.createElement('div');
            feedbackArea.className = 'feedback-area';
            feedbackArea.id = `feedback-0`;
            rowDiv.appendChild(feedbackArea);
            
            // Create row controls
            const controlsDiv = document.createElement('div');
            controlsDiv.className = 'row-controls';
            controlsDiv.id = `controls-0`;
            controlsDiv.style.display = 'flex';
            
            // Submit button
            const submitBtn = document.createElement('button');
            submitBtn.className = 'control-item submit-control';
            submitBtn.innerHTML = 'âœ“';
            submitBtn.onclick = () => submitGuess();
            submitBtn.title = 'Submit Guess';
            
            controlsDiv.appendChild(submitBtn);
            rowDiv.appendChild(controlsDiv);
            
            board.appendChild(rowDiv);
        }


        // Toggle peg color
        function togglePegColor(row, col) {
            if (gameOver || row !== currentAttempt) return;
            
            const peg = document.getElementById(`peg-${row}-${col}`);
            
            // Get current color or start with first color
            const currentColorClass = Array.from(peg.classList).find(cls => COLORS.includes(cls));
            let currentIndex = currentColorClass ? COLORS.indexOf(currentColorClass) : -1;
            
            // Cycle to next color
            const nextIndex = (currentIndex + 1) % COLORS.length;
            const nextColor = COLORS[nextIndex];
            
            // Remove all color classes and add the new one
            COLORS.forEach(color => peg.classList.remove(color));
            peg.classList.add(nextColor);
        }


        // Submit a guess
        function submitGuess() {
            if (gameOver) return;
            
            const currentRow = document.getElementById(`row-${currentAttempt}`);
            const pegs = currentRow.querySelectorAll('.peg');
            
            // Check if all pegs are filled
            let guess = [];
            let allFilled = true;
            
            for (let i = 0; i < CODE_LENGTH; i++) {
                const peg = pegs[i];
                const colorClass = Array.from(peg.classList).find(cls => COLORS.includes(cls));
                if (colorClass) {
                    guess.push(colorClass);
                } else {
                    allFilled = false;
                    break;
                }
            }
            
            if (!allFilled) {
                showMessage('Please fill all pegs with colors!', 'info');
                return;
            }
            
            // Calculate feedback
            const feedback = calculateFeedback(guess);
            displayFeedback(feedback);
            
            // Check for win
            if (feedback.black === CODE_LENGTH) {
                gameOver = true;
                showMessage('ðŸŽ‰ Congratulations! You cracked the code!', 'win');
                return;
            }
            
            // Deactivate current row
            currentRow.classList.remove('active');
            currentRow.classList.add('completed');
            document.getElementById(`controls-${currentAttempt}`).style.display = 'none';
            
            // Move to next attempt
            currentAttempt++;
            
            if (currentAttempt < MAX_ATTEMPTS) {
                // Create new active row at the top
                createNewActiveRow();
                updateGameInfo();
            } else {
                gameOver = true;
                showMessage(`Game Over! The secret code was: ${secretCode.join(', ')}`, 'lose');
            }
        }

        // Create new active row at the top
        function createNewActiveRow() {
            const board = document.getElementById('game-board');
            const rowDiv = document.createElement('div');
            rowDiv.className = 'guess-row active';
            rowDiv.id = `row-${currentAttempt}`;
            
            // Create pegs
            for (let col = 0; col < CODE_LENGTH; col++) {
                const peg = document.createElement('div');
                peg.className = 'peg';
                peg.id = `peg-${currentAttempt}-${col}`;
                peg.onclick = () => togglePegColor(currentAttempt, col);
                rowDiv.appendChild(peg);
            }
            
            // Create feedback area
            const feedbackArea = document.createElement('div');
            feedbackArea.className = 'feedback-area';
            feedbackArea.id = `feedback-${currentAttempt}`;
            rowDiv.appendChild(feedbackArea);
            
            // Create row controls
            const controlsDiv = document.createElement('div');
            controlsDiv.className = 'row-controls';
            controlsDiv.id = `controls-${currentAttempt}`;
            controlsDiv.style.display = 'flex';
            
            // Submit button
            const submitBtn = document.createElement('button');
            submitBtn.className = 'control-item submit-control';
            submitBtn.innerHTML = 'âœ“';
            submitBtn.onclick = () => submitGuess();
            submitBtn.title = 'Submit Guess';
            
            controlsDiv.appendChild(submitBtn);
            rowDiv.appendChild(controlsDiv);
            
            // Insert at the top of the board
            board.insertBefore(rowDiv, board.firstChild);
        }

        // Calculate feedback for a guess
        function calculateFeedback(guess) {
            let black = 0;
            let white = 0;
            const secretCopy = [...secretCode];
            const guessCopy = [...guess];
            
            // Count black pegs (correct color and position)
            for (let i = 0; i < CODE_LENGTH; i++) {
                if (guessCopy[i] === secretCopy[i]) {
                    black++;
                    secretCopy[i] = null;
                    guessCopy[i] = null;
                }
            }
            
            // Count white pegs (correct color, wrong position)
            for (let i = 0; i < CODE_LENGTH; i++) {
                if (guessCopy[i] && secretCopy.includes(guessCopy[i])) {
                    white++;
                    const index = secretCopy.indexOf(guessCopy[i]);
                    secretCopy[index] = null;
                }
            }
            
            return { black, white };
        }

        // Display feedback
        function displayFeedback(feedback) {
            const feedbackArea = document.getElementById(`feedback-${currentAttempt}`);
            feedbackArea.innerHTML = '';
            
            // Add black pegs
            for (let i = 0; i < feedback.black; i++) {
                const peg = document.createElement('div');
                peg.className = 'feedback-peg black';
                feedbackArea.appendChild(peg);
            }
            
            // Add white pegs
            for (let i = 0; i < feedback.white; i++) {
                const peg = document.createElement('div');
                peg.className = 'feedback-peg white';
                feedbackArea.appendChild(peg);
            }
        }

        // Update game info
        function updateGameInfo() {
            document.getElementById('attempt-count').textContent = currentAttempt + 1;
        }

        // Show message
        function showMessage(text, type) {
            const message = document.getElementById('message');
            message.textContent = text;
            message.className = `message ${type}`;
            message.style.display = 'block';
        }

        // Hide message
        function hideMessage() {
            document.getElementById('message').style.display = 'none';
        }

        // Reset the game
        function resetGame() {
            currentAttempt = 0;
            gameOver = false;
            generateSecretCode();
            createGameBoard();
            updateGameInfo();
            hideMessage();
        }

        // Initialize the game when the page loads
        window.onload = initGame;
    </script>
</body>
</html>
